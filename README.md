\htmlonly
<script type="text/javascript">
window.onload = addIndent;
</script>
\endhtmlonly
\latexonly
\setlength{\parindent}{9.5mm} 
\endlatexonly

[![License: GPL v3](doc/badges/License_GPLv3.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![Build system](doc/badges/CMake.svg)](https://cmake.org)
[![Language: C++](doc/badges/C++.svg)](https://ru.wikipedia.org/wiki/C%2B%2B)
[![Platform Windows](doc/badges/Windows.svg)](https://support.microsoft.com/ru-ru/windows)
[![Platform debian](doc/badges/debian.svg)](https://www.debian.org/)
[![Platform macOS](doc/badges/macOS.svg)](https://www.apple.com/os/macos/)

Описание
========

stl2step - часть проекта по созданию библиотек посадочных мест для Altium Designer,
мультиплатформенная консольная программа, предназначенная для преобразования
одного или нескольких файлов формата stl, содержащего описание одного или
нескольких трёхмерных объектов (подразумевается, что файлы формата stl
получены при помощи программы OpenSCAD), в файл формата STEP
(ГОСТ Р ИСО 10303/ISO 10303).

Лицензия
========

stl2step распространяется по какой-то хорошей лицензии.

Исходные тексты
===============

Последняя версия исходных текстов stl2step может быть загружена из [репозитория](https://github.com/GeorgKZ/stl2step).
Зеркало на [GitFlic](https://gitflic.ru).
Планируется [MosHub](https://hub.mos.ru) [gitlite](https://gitlife.ru/)

Использование stl2step
======================

```
stl2step <[ДОП. ПАРАМЕТРЫ] --stl <in1.stl> [ДОП. ПАРАМЕТРЫ] --stl <in2.stl> ... > <--out результат.step>
    in1.stl, in2.stl - входные файлы формата STL (в том числе группы файлов по маске с использованием джокерных символов)
    результат.step   - выходной файл формата STEP
    ДОП. ПАРАМЕТРЫ:
    ------------------- действующие только для следующего файла (группы файлов по маске) формата STL:
    --copy X Y Z [X Y Z] ... - добавить копию (копии) объектов, сдвинутые по вектору (X Y Z)
    --name имя фигуры - установить для фигуры, определённой в файле, имя 'имя фигуры'
    ------------------- действующие для всех последующих файлов формата STL до изменения или отмены:
    --color R G B [A] - установить цвет в пространстве RGB (по умолчанию: 0.5 0.5 0.5 1.0)
                       с необязательной прозрачностью (как в параметре --transp)
    --transp T        - установить прозрачность: от 0.0 (невидимость) до 1.0 (непрозрачность) (по умолчанию: 1.0)
    {--ofy|--ofn}     - разрешить/запретить объединение треугольных граней в многоугольные (по умолчанию: разрешить)
    {--osy|--osn}     - разрешить/запретить разделение разделение граней по отдельным фигурам (по умолчанию: разрешить)
    {--ocy|--ocn}     - разрешить/запретить замену дублирующихся фигур ссылками (по умолчанию: разрешить)
    --d0              - отменить вывод отладочных сообщений
    --d1              - включить отладочные сообщения уровня 1 (самые общие)
    --d2              - включить отладочные сообщения уровня 2
    --d3              - включить отладочные сообщения уровня 3 (самые детальные)
    --dp              - разрешить профилирование (оценку времени работы отдельных этапов обработки)
```


Пример: требуется добавить две копии объекта из файла in1.stl, сдвинутые на указанные смещения по трём осям


```
stl2step --copy 0.123 1.234 -2.345 1.123 2.234 -5.345 --stl in1.stl --out out.step
```


Пример: требуется установить цвет "красный = 0.25, зелёный = 0.3, синий = 1.0" для объектов файлов in1.stl и in2.stl


```
stl2step --color 0.25 0.3 1 --stl in1.stl --stl in2.stl --out out.step
```

Требования
===============
Для сборки приложения - компилятор gcc/clang/MinGW/MSYS2 MinGW/MSYS2 Clang/Visual Studio.
Для сборки документации html и pdf - пакеты doxygen, texlive-full, texlive-plain-generic.

__Внимание!__ Если при сборке приложения был использован компилятор MinGW или Msys/MinGW,
то при запуске приложения в среде исполнения Windows 7 выводимый на экран русский
текст будет повреждён. Это особенность обработки потокового вывода "std::cout << ...".

Сборка stl2step
===============

Поддерживаемые платформы
------------------------

* Microsoft Windows
* GNU/Linux
* MacOS

Конфигурирование
----------------

Сборка выполняется при помощи cmake. При конфигурировании желательно указать директорию для
файлов, создаваемых cmake, также можно выбрать систему построения ("генератор").
Поддерживаются конфигурации Debug, Release, RelWithDebInfo, MinSizeRel.
Сборка проверялась с генератором "Ninja" и "Ninja Multi-Config", без указания генератора
использовалиcь генераторы по умолчанию GCC при сборке под GNU/Linux и Microsoft Visual Studio
при сборке под Microsoft Windows.

Пример конфигурирования под GNU/Linux:


```
cmake -S ./ -B ./build/cmake
```


или под Microsoft Windows:


```
cmake -G Ninja -D CMAKE_BUILD_TYPE:STRING="Release" -S .\ -B .\build\win_msvc_r_x64
```


Сборка исполняемого файла
-------------------------

Создание исполняемого файла ("цели по умолчанию") требует только указания директории, созданной cmake:


```
cmake --build ./build/cmake
```


Если конфигурирование выполнялось с использованием мультиконфирационного генератора, то тип сборки
указывается при сборке исполняемого файла, а не во время конфигурирования, например:


```
cmake --build ./build/cmake --config MinSizeRel
```

Построение документации
-----------------------

Построение документации в формате HTML потребует указания цели html_doc:


```
cmake --build ./build/cmake --target html_doc
```

При использовании пакета MikTeX (Windows) необходимо установит значение переменной окружения MIKTEX_ENABLEWRITE18=t. 

Построение документации в формате PDF и HTML потребует указания цели pdf_doc:


```
cmake --build ./build/cmake --target pdf_doc
```


Статический анализ
------------------

Выполенние статического анализа исходных текстов пр помощи [PVS-Studio](https://pvs-studio.ru/ru/pvs-studio/)
производится при указании цели analyze:


```
cmake --build ./build/cmake --target analyze
```

Установка
---------

В Linux установка производится в директорию ```~/.local/bin```, в Windows в директорию
```C:\Program Files\AltLibGenUtils``` (установлено в файле CMakeLists.txt)

\latexonly
\setlength{\parindent}{0mm} 
\endlatexonly
